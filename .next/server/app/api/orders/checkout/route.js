"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/orders/checkout/route";
exports.ids = ["app/api/orders/checkout/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Fcheckout%2Froute&page=%2Fapi%2Forders%2Fcheckout%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Fcheckout%2Froute.ts&appDir=%2FUsers%2Fshaurya%2FDocuments%2Fstackapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaurya%2FDocuments%2Fstackapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Fcheckout%2Froute&page=%2Fapi%2Forders%2Fcheckout%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Fcheckout%2Froute.ts&appDir=%2FUsers%2Fshaurya%2FDocuments%2Fstackapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaurya%2FDocuments%2Fstackapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_shaurya_Documents_stackapp_src_app_api_orders_checkout_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/orders/checkout/route.ts */ \"(rsc)/./src/app/api/orders/checkout/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/orders/checkout/route\",\n        pathname: \"/api/orders/checkout\",\n        filename: \"route\",\n        bundlePath: \"app/api/orders/checkout/route\"\n    },\n    resolvedPagePath: \"/Users/shaurya/Documents/stackapp/src/app/api/orders/checkout/route.ts\",\n    nextConfigOutput,\n    userland: _Users_shaurya_Documents_stackapp_src_app_api_orders_checkout_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/orders/checkout/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvcmRlcnMlMkZjaGVja291dCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGb3JkZXJzJTJGY2hlY2tvdXQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZvcmRlcnMlMkZjaGVja291dCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNoYXVyeWElMkZEb2N1bWVudHMlMkZzdGFja2FwcCUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZzaGF1cnlhJTJGRG9jdW1lbnRzJTJGc3RhY2thcHAmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDc0I7QUFDbkc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb3ZpZV9hcHAvP2ZiY2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3NoYXVyeWEvRG9jdW1lbnRzL3N0YWNrYXBwL3NyYy9hcHAvYXBpL29yZGVycy9jaGVja291dC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvb3JkZXJzL2NoZWNrb3V0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvb3JkZXJzL2NoZWNrb3V0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9vcmRlcnMvY2hlY2tvdXQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvc2hhdXJ5YS9Eb2N1bWVudHMvc3RhY2thcHAvc3JjL2FwcC9hcGkvb3JkZXJzL2NoZWNrb3V0L3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL29yZGVycy9jaGVja291dC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Fcheckout%2Froute&page=%2Fapi%2Forders%2Fcheckout%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Fcheckout%2Froute.ts&appDir=%2FUsers%2Fshaurya%2FDocuments%2Fstackapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaurya%2FDocuments%2Fstackapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/orders/checkout/route.ts":
/*!**********************************************!*\
  !*** ./src/app/api/orders/checkout/route.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _daos_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/daos/client */ \"(rsc)/./src/daos/client.ts\");\n/* harmony import */ var _daos_discount__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/daos/discount */ \"(rsc)/./src/daos/discount.ts\");\n/* harmony import */ var _daos_order__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/daos/order */ \"(rsc)/./src/daos/order.ts\");\n\n\n\nasync function POST(req) {\n    const nth = 1;\n    const rev = await req.json();\n    try {\n        let discount = null;\n        const db = new _daos_client__WEBPACK_IMPORTED_MODULE_0__.ClientDAO().getDB();\n        const client = await new _daos_client__WEBPACK_IMPORTED_MODULE_0__.ClientDAO(db).getClientDetails(Number(rev.clientId));\n        if (rev.code) {\n            discount = await new _daos_discount__WEBPACK_IMPORTED_MODULE_1__.DiscountDAO(db).getDiscountByCode(rev.code);\n            if (discount == null) {\n                return Response.json({\n                    message: \"Invalid coupon\"\n                });\n            }\n        }\n        const temp = async (cart)=>{\n            let totalAmount = 0;\n            let totalQuan = 0;\n            cart.forEach(async (item, i)=>{\n                if (client !== null) {\n                    const itemDetails = await new _daos_order__WEBPACK_IMPORTED_MODULE_2__.OrderDAO(db).getItemDetails(item.id);\n                    itemDetails ? totalAmount = totalAmount + itemDetails?.price * item.quantity : null;\n                    totalQuan = totalQuan + item.quantity;\n                    if (i == cart.length - 1) {\n                        if (client.totalOrders / nth === 0 && discount) {\n                            totalAmount = totalAmount - totalAmount * discount.percent / 100;\n                            client.totalDiscountAmount = client.totalDiscountAmount + totalAmount * discount.percent / 100;\n                        }\n                        client.totalPurchaseAmount = client.totalPurchaseAmount + totalAmount;\n                        client.totalOrders = client.totalOrders + 1;\n                        client.itemPurchasedCount = client.itemPurchasedCount + totalQuan;\n                        await new _daos_client__WEBPACK_IMPORTED_MODULE_0__.ClientDAO(db).updateClient(client);\n                        await new _daos_order__WEBPACK_IMPORTED_MODULE_2__.OrderDAO(db).emptyCart(Number(rev.clientId));\n                    }\n                }\n            });\n        };\n        if (client) {\n            const cart = await new _daos_order__WEBPACK_IMPORTED_MODULE_2__.OrderDAO(db).getCart(Number(rev.clientId));\n            await temp(cart);\n            return Response.json({\n                message: \"Order placed successfully!\"\n            });\n        }\n    } catch (e) {\n        return Response.json({\n            message: e\n        });\n    }\n}\nasync function GET(req) {\n    try {\n        const coupon = req.nextUrl.searchParams.get(\"c\");\n        const details = await new _daos_discount__WEBPACK_IMPORTED_MODULE_1__.DiscountDAO().getDiscountByCode(coupon || \"\");\n        return Response.json({\n            ...details\n        });\n    } catch (e) {\n        console.log(e);\n        return Response.json({\n            message: e\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9vcmRlcnMvY2hlY2tvdXQvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMEM7QUFDSTtBQUNOO0FBS2pDLGVBQWVHLEtBQUtDLEdBQWdCO0lBQ3pDLE1BQU1DLE1BQU07SUFFWixNQUFNQyxNQUdGLE1BQU1GLElBQUlHLElBQUk7SUFFbEIsSUFBSTtRQUNGLElBQUlDLFdBQTRCO1FBQ2hDLE1BQU1DLEtBQUssSUFBSVQsbURBQVNBLEdBQUdVLEtBQUs7UUFDaEMsTUFBTUMsU0FBUyxNQUFNLElBQUlYLG1EQUFTQSxDQUFDUyxJQUFJRyxnQkFBZ0IsQ0FDckRDLE9BQU9QLElBQUlRLFFBQVE7UUFFckIsSUFBSVIsSUFBSVMsSUFBSSxFQUFFO1lBQ1pQLFdBQVcsTUFBTSxJQUFJUCx1REFBV0EsQ0FBQ1EsSUFBSU8saUJBQWlCLENBQUNWLElBQUlTLElBQUk7WUFDL0QsSUFBSVAsWUFBWSxNQUFNO2dCQUNwQixPQUFPUyxTQUFTVixJQUFJLENBQUM7b0JBQUVXLFNBQVM7Z0JBQWlCO1lBQ25EO1FBQ0Y7UUFDQSxNQUFNQyxPQUFPLE9BQ1hDO1lBT0EsSUFBSUMsY0FBYztZQUNsQixJQUFJQyxZQUFZO1lBQ2hCRixLQUFLRyxPQUFPLENBQUMsT0FBT0MsTUFBTUM7Z0JBQ3hCLElBQUlkLFdBQVcsTUFBTTtvQkFDbkIsTUFBTWUsY0FBYyxNQUFNLElBQUl4QixpREFBUUEsQ0FBQ08sSUFBSWtCLGNBQWMsQ0FBQ0gsS0FBS0ksRUFBRTtvQkFDakVGLGNBQ0tMLGNBQWNBLGNBQWNLLGFBQWFHLFFBQVFMLEtBQUtNLFFBQVEsR0FDL0Q7b0JBQ0pSLFlBQVlBLFlBQVlFLEtBQUtNLFFBQVE7b0JBQ3JDLElBQUlMLEtBQUtMLEtBQUtXLE1BQU0sR0FBRyxHQUFHO3dCQUN4QixJQUFJcEIsT0FBT3FCLFdBQVcsR0FBRzNCLFFBQVEsS0FBS0csVUFBVTs0QkFDOUNhLGNBQ0VBLGNBQWMsY0FBZWIsU0FBU3lCLE9BQU8sR0FBSTs0QkFDbkR0QixPQUFPdUIsbUJBQW1CLEdBQ3hCdkIsT0FBT3VCLG1CQUFtQixHQUMxQixjQUFlMUIsU0FBU3lCLE9BQU8sR0FBSTt3QkFDdkM7d0JBQ0F0QixPQUFPd0IsbUJBQW1CLEdBQ3hCeEIsT0FBT3dCLG1CQUFtQixHQUFHZDt3QkFDL0JWLE9BQU9xQixXQUFXLEdBQUdyQixPQUFPcUIsV0FBVyxHQUFHO3dCQUMxQ3JCLE9BQU95QixrQkFBa0IsR0FBR3pCLE9BQU95QixrQkFBa0IsR0FBR2Q7d0JBQ3hELE1BQU0sSUFBSXRCLG1EQUFTQSxDQUFDUyxJQUFJNEIsWUFBWSxDQUFDMUI7d0JBQ3JDLE1BQU0sSUFBSVQsaURBQVFBLENBQUNPLElBQUk2QixTQUFTLENBQUN6QixPQUFPUCxJQUFJUSxRQUFRO29CQUN0RDtnQkFDRjtZQUNGO1FBQ0Y7UUFDQSxJQUFJSCxRQUFRO1lBQ1YsTUFBTVMsT0FBTyxNQUFNLElBQUlsQixpREFBUUEsQ0FBQ08sSUFBSThCLE9BQU8sQ0FBQzFCLE9BQU9QLElBQUlRLFFBQVE7WUFDL0QsTUFBTUssS0FBS0M7WUFDWCxPQUFPSCxTQUFTVixJQUFJLENBQUM7Z0JBQUVXLFNBQVM7WUFBNkI7UUFDL0Q7SUFDRixFQUFFLE9BQU9zQixHQUFHO1FBQ1YsT0FBT3ZCLFNBQVNWLElBQUksQ0FBQztZQUFFVyxTQUFTc0I7UUFBRTtJQUNwQztBQUNGO0FBQ08sZUFBZUMsSUFBSXJDLEdBQWdCO0lBQ3hDLElBQUk7UUFDRixNQUFNc0MsU0FBU3RDLElBQUl1QyxPQUFPLENBQUNDLFlBQVksQ0FBQ0MsR0FBRyxDQUFDO1FBQzVDLE1BQU1DLFVBQVUsTUFBTSxJQUFJN0MsdURBQVdBLEdBQUdlLGlCQUFpQixDQUFDMEIsVUFBVTtRQUNwRSxPQUFPekIsU0FBU1YsSUFBSSxDQUFDO1lBQUUsR0FBR3VDLE9BQU87UUFBQztJQUNwQyxFQUFFLE9BQU9OLEdBQUc7UUFDVk8sUUFBUUMsR0FBRyxDQUFDUjtRQUNaLE9BQU92QixTQUFTVixJQUFJLENBQUM7WUFBRVcsU0FBU3NCO1FBQUU7SUFDcEM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21vdmllX2FwcC8uL3NyYy9hcHAvYXBpL29yZGVycy9jaGVja291dC9yb3V0ZS50cz8xODhjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsaWVudERBTyB9IGZyb20gXCJAL2Rhb3MvY2xpZW50XCI7XG5pbXBvcnQgeyBEaXNjb3VudERBTyB9IGZyb20gXCJAL2Rhb3MvZGlzY291bnRcIjtcbmltcG9ydCB7IE9yZGVyREFPIH0gZnJvbSBcIkAvZGFvcy9vcmRlclwiO1xuaW1wb3J0IHsgQ2FydCwgSXRlbSB9IGZyb20gXCJAL3R5cGVzL29yZGVyXCI7XG5pbXBvcnQgeyBEaXNjb3VudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCBudGggPSAxO1xuXG4gIGNvbnN0IHJldjoge1xuICAgIGNvZGU/OiBzdHJpbmc7XG4gICAgY2xpZW50SWQ6IG51bWJlcjtcbiAgfSA9IGF3YWl0IHJlcS5qc29uKCk7XG5cbiAgdHJ5IHtcbiAgICBsZXQgZGlzY291bnQ6IERpc2NvdW50IHwgbnVsbCA9IG51bGw7XG4gICAgY29uc3QgZGIgPSBuZXcgQ2xpZW50REFPKCkuZ2V0REIoKTtcbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBuZXcgQ2xpZW50REFPKGRiKS5nZXRDbGllbnREZXRhaWxzKFxuICAgICAgTnVtYmVyKHJldi5jbGllbnRJZClcbiAgICApO1xuICAgIGlmIChyZXYuY29kZSkge1xuICAgICAgZGlzY291bnQgPSBhd2FpdCBuZXcgRGlzY291bnREQU8oZGIpLmdldERpc2NvdW50QnlDb2RlKHJldi5jb2RlKTtcbiAgICAgIGlmIChkaXNjb3VudCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogXCJJbnZhbGlkIGNvdXBvblwiIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB0ZW1wID0gYXN5bmMgKFxuICAgICAgY2FydDoge1xuICAgICAgICBpZDogbnVtYmVyO1xuICAgICAgICBjbGllbnRJZDogbnVtYmVyO1xuICAgICAgICBpdGVtOiBudW1iZXI7XG4gICAgICAgIHF1YW50aXR5OiBudW1iZXI7XG4gICAgICB9W11cbiAgICApID0+IHtcbiAgICAgIGxldCB0b3RhbEFtb3VudCA9IDA7XG4gICAgICBsZXQgdG90YWxRdWFuID0gMDtcbiAgICAgIGNhcnQuZm9yRWFjaChhc3luYyAoaXRlbSwgaSkgPT4ge1xuICAgICAgICBpZiAoY2xpZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgY29uc3QgaXRlbURldGFpbHMgPSBhd2FpdCBuZXcgT3JkZXJEQU8oZGIpLmdldEl0ZW1EZXRhaWxzKGl0ZW0uaWQpO1xuICAgICAgICAgIGl0ZW1EZXRhaWxzXG4gICAgICAgICAgICA/ICh0b3RhbEFtb3VudCA9IHRvdGFsQW1vdW50ICsgaXRlbURldGFpbHM/LnByaWNlICogaXRlbS5xdWFudGl0eSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICB0b3RhbFF1YW4gPSB0b3RhbFF1YW4gKyBpdGVtLnF1YW50aXR5O1xuICAgICAgICAgIGlmIChpID09IGNhcnQubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgaWYgKGNsaWVudC50b3RhbE9yZGVycyAvIG50aCA9PT0gMCAmJiBkaXNjb3VudCkge1xuICAgICAgICAgICAgICB0b3RhbEFtb3VudCA9XG4gICAgICAgICAgICAgICAgdG90YWxBbW91bnQgLSAodG90YWxBbW91bnQgKiBkaXNjb3VudC5wZXJjZW50KSAvIDEwMDtcbiAgICAgICAgICAgICAgY2xpZW50LnRvdGFsRGlzY291bnRBbW91bnQgPVxuICAgICAgICAgICAgICAgIGNsaWVudC50b3RhbERpc2NvdW50QW1vdW50ICtcbiAgICAgICAgICAgICAgICAodG90YWxBbW91bnQgKiBkaXNjb3VudC5wZXJjZW50KSAvIDEwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsaWVudC50b3RhbFB1cmNoYXNlQW1vdW50ID1cbiAgICAgICAgICAgICAgY2xpZW50LnRvdGFsUHVyY2hhc2VBbW91bnQgKyB0b3RhbEFtb3VudDtcbiAgICAgICAgICAgIGNsaWVudC50b3RhbE9yZGVycyA9IGNsaWVudC50b3RhbE9yZGVycyArIDE7XG4gICAgICAgICAgICBjbGllbnQuaXRlbVB1cmNoYXNlZENvdW50ID0gY2xpZW50Lml0ZW1QdXJjaGFzZWRDb3VudCArIHRvdGFsUXVhbjtcbiAgICAgICAgICAgIGF3YWl0IG5ldyBDbGllbnREQU8oZGIpLnVwZGF0ZUNsaWVudChjbGllbnQpO1xuICAgICAgICAgICAgYXdhaXQgbmV3IE9yZGVyREFPKGRiKS5lbXB0eUNhcnQoTnVtYmVyKHJldi5jbGllbnRJZCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgICBpZiAoY2xpZW50KSB7XG4gICAgICBjb25zdCBjYXJ0ID0gYXdhaXQgbmV3IE9yZGVyREFPKGRiKS5nZXRDYXJ0KE51bWJlcihyZXYuY2xpZW50SWQpKTtcbiAgICAgIGF3YWl0IHRlbXAoY2FydCk7XG4gICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6IFwiT3JkZXIgcGxhY2VkIHN1Y2Nlc3NmdWxseSFcIiB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6IGUgfSk7XG4gIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxOiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGNvdXBvbiA9IHJlcS5uZXh0VXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJjXCIpO1xuICAgIGNvbnN0IGRldGFpbHMgPSBhd2FpdCBuZXcgRGlzY291bnREQU8oKS5nZXREaXNjb3VudEJ5Q29kZShjb3Vwb24gfHwgXCJcIik7XG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyAuLi5kZXRhaWxzIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSk7XG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiBlIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2xpZW50REFPIiwiRGlzY291bnREQU8iLCJPcmRlckRBTyIsIlBPU1QiLCJyZXEiLCJudGgiLCJyZXYiLCJqc29uIiwiZGlzY291bnQiLCJkYiIsImdldERCIiwiY2xpZW50IiwiZ2V0Q2xpZW50RGV0YWlscyIsIk51bWJlciIsImNsaWVudElkIiwiY29kZSIsImdldERpc2NvdW50QnlDb2RlIiwiUmVzcG9uc2UiLCJtZXNzYWdlIiwidGVtcCIsImNhcnQiLCJ0b3RhbEFtb3VudCIsInRvdGFsUXVhbiIsImZvckVhY2giLCJpdGVtIiwiaSIsIml0ZW1EZXRhaWxzIiwiZ2V0SXRlbURldGFpbHMiLCJpZCIsInByaWNlIiwicXVhbnRpdHkiLCJsZW5ndGgiLCJ0b3RhbE9yZGVycyIsInBlcmNlbnQiLCJ0b3RhbERpc2NvdW50QW1vdW50IiwidG90YWxQdXJjaGFzZUFtb3VudCIsIml0ZW1QdXJjaGFzZWRDb3VudCIsInVwZGF0ZUNsaWVudCIsImVtcHR5Q2FydCIsImdldENhcnQiLCJlIiwiR0VUIiwiY291cG9uIiwibmV4dFVybCIsInNlYXJjaFBhcmFtcyIsImdldCIsImRldGFpbHMiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/orders/checkout/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/daos/client.ts":
/*!****************************!*\
  !*** ./src/daos/client.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClientDAO: () => (/* binding */ ClientDAO)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nclass ClientDAO {\n    constructor(db){\n        this.db = db || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n    }\n    getDB() {\n        return this.db;\n    }\n    async addClient(name) {\n        return await this.db.client.create({\n            data: {\n                name\n            }\n        });\n    }\n    async getClientDetails(clientId) {\n        return await this.db.client.findFirst({\n            where: {\n                id: clientId\n            }\n        });\n    }\n    async updateClient(data) {\n        const prevDetails = await this.getClientDetails(data.id);\n        if (data.totalDiscountAmount && prevDetails !== null) {\n            prevDetails.totalDiscountAmount = data.totalDiscountAmount;\n        }\n        if (data.totalPurchaseAmount && prevDetails !== null) {\n            prevDetails.totalPurchaseAmount = data.totalPurchaseAmount;\n        }\n        if (data.itemPurchasedCount && prevDetails !== null) {\n            prevDetails.itemPurchasedCount = data.itemPurchasedCount;\n        }\n        const cart = await this.db.client.update({\n            where: {\n                id: data.id\n            },\n            data: {\n                ...prevDetails\n            }\n        });\n        return cart;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvZGFvcy9jbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRThDO0FBRXZDLE1BQU1DO0lBRVhDLFlBQVlDLEVBQWlCLENBQUU7UUFDN0IsSUFBSSxDQUFDQSxFQUFFLEdBQUdBLE1BQU0sSUFBSUgsd0RBQVlBO0lBQ2xDO0lBQ0FJLFFBQVE7UUFDTixPQUFPLElBQUksQ0FBQ0QsRUFBRTtJQUNoQjtJQUNBLE1BQU1FLFVBQVVDLElBQVksRUFBRTtRQUM1QixPQUFPLE1BQU0sSUFBSSxDQUFDSCxFQUFFLENBQUNJLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDO1lBQ2pDQyxNQUFNO2dCQUNKSDtZQUNGO1FBQ0Y7SUFDRjtJQUNBLE1BQU1JLGlCQUFpQkMsUUFBZ0IsRUFBRTtRQUN2QyxPQUFPLE1BQU0sSUFBSSxDQUFDUixFQUFFLENBQUNJLE1BQU0sQ0FBQ0ssU0FBUyxDQUFDO1lBQ3BDQyxPQUFPO2dCQUNMQyxJQUFJSDtZQUNOO1FBQ0Y7SUFDRjtJQUNBLE1BQU1JLGFBQWFOLElBQVksRUFBRTtRQUMvQixNQUFNTyxjQUFjLE1BQU0sSUFBSSxDQUFDTixnQkFBZ0IsQ0FBQ0QsS0FBS0ssRUFBRTtRQUN2RCxJQUFJTCxLQUFLUSxtQkFBbUIsSUFBSUQsZ0JBQWdCLE1BQU07WUFDcERBLFlBQVlDLG1CQUFtQixHQUFHUixLQUFLUSxtQkFBbUI7UUFDNUQ7UUFDQSxJQUFJUixLQUFLUyxtQkFBbUIsSUFBSUYsZ0JBQWdCLE1BQU07WUFDcERBLFlBQVlFLG1CQUFtQixHQUFHVCxLQUFLUyxtQkFBbUI7UUFDNUQ7UUFDQSxJQUFJVCxLQUFLVSxrQkFBa0IsSUFBSUgsZ0JBQWdCLE1BQU07WUFDbkRBLFlBQVlHLGtCQUFrQixHQUFHVixLQUFLVSxrQkFBa0I7UUFDMUQ7UUFDQSxNQUFNQyxPQUFPLE1BQU0sSUFBSSxDQUFDakIsRUFBRSxDQUFDSSxNQUFNLENBQUNjLE1BQU0sQ0FBQztZQUN2Q1IsT0FBTztnQkFDTEMsSUFBSUwsS0FBS0ssRUFBRTtZQUNiO1lBQ0FMLE1BQU07Z0JBQ0osR0FBR08sV0FBVztZQUNoQjtRQUNGO1FBQ0EsT0FBT0k7SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW92aWVfYXBwLy4vc3JjL2Rhb3MvY2xpZW50LnRzPzdkMDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2xpZW50IH0gZnJvbSBcIkAvdHlwZXMvY2xpZW50XCI7XG5pbXBvcnQgeyBDYXJ0IH0gZnJvbSBcIkAvdHlwZXMvb3JkZXJcIjtcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5leHBvcnQgY2xhc3MgQ2xpZW50REFPIHtcbiAgZGI6IFByaXNtYUNsaWVudDtcbiAgY29uc3RydWN0b3IoZGI/OiBQcmlzbWFDbGllbnQpIHtcbiAgICB0aGlzLmRiID0gZGIgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xuICB9XG4gIGdldERCKCkge1xuICAgIHJldHVybiB0aGlzLmRiO1xuICB9XG4gIGFzeW5jIGFkZENsaWVudChuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5kYi5jbGllbnQuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbmFtZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgZ2V0Q2xpZW50RGV0YWlscyhjbGllbnRJZDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZGIuY2xpZW50LmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZDogY2xpZW50SWQsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUNsaWVudChkYXRhOiBDbGllbnQpIHtcbiAgICBjb25zdCBwcmV2RGV0YWlscyA9IGF3YWl0IHRoaXMuZ2V0Q2xpZW50RGV0YWlscyhkYXRhLmlkKTtcbiAgICBpZiAoZGF0YS50b3RhbERpc2NvdW50QW1vdW50ICYmIHByZXZEZXRhaWxzICE9PSBudWxsKSB7XG4gICAgICBwcmV2RGV0YWlscy50b3RhbERpc2NvdW50QW1vdW50ID0gZGF0YS50b3RhbERpc2NvdW50QW1vdW50O1xuICAgIH1cbiAgICBpZiAoZGF0YS50b3RhbFB1cmNoYXNlQW1vdW50ICYmIHByZXZEZXRhaWxzICE9PSBudWxsKSB7XG4gICAgICBwcmV2RGV0YWlscy50b3RhbFB1cmNoYXNlQW1vdW50ID0gZGF0YS50b3RhbFB1cmNoYXNlQW1vdW50O1xuICAgIH1cbiAgICBpZiAoZGF0YS5pdGVtUHVyY2hhc2VkQ291bnQgJiYgcHJldkRldGFpbHMgIT09IG51bGwpIHtcbiAgICAgIHByZXZEZXRhaWxzLml0ZW1QdXJjaGFzZWRDb3VudCA9IGRhdGEuaXRlbVB1cmNoYXNlZENvdW50O1xuICAgIH1cbiAgICBjb25zdCBjYXJ0ID0gYXdhaXQgdGhpcy5kYi5jbGllbnQudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgLi4ucHJldkRldGFpbHMsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBjYXJ0O1xuICB9XG59XG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiQ2xpZW50REFPIiwiY29uc3RydWN0b3IiLCJkYiIsImdldERCIiwiYWRkQ2xpZW50IiwibmFtZSIsImNsaWVudCIsImNyZWF0ZSIsImRhdGEiLCJnZXRDbGllbnREZXRhaWxzIiwiY2xpZW50SWQiLCJmaW5kRmlyc3QiLCJ3aGVyZSIsImlkIiwidXBkYXRlQ2xpZW50IiwicHJldkRldGFpbHMiLCJ0b3RhbERpc2NvdW50QW1vdW50IiwidG90YWxQdXJjaGFzZUFtb3VudCIsIml0ZW1QdXJjaGFzZWRDb3VudCIsImNhcnQiLCJ1cGRhdGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/daos/client.ts\n");

/***/ }),

/***/ "(rsc)/./src/daos/discount.ts":
/*!******************************!*\
  !*** ./src/daos/discount.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DiscountDAO: () => (/* binding */ DiscountDAO)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nclass DiscountDAO {\n    getDB() {\n        return this.db;\n    }\n    constructor(db){\n        this.db = db || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n        this.crypto = __webpack_require__(/*! crypto */ \"crypto\");\n    }\n    dec2hex(dec) {\n        return dec.toString(16).padStart(2, \"0\");\n    }\n    async generateDiscountCode(len) {\n        var arr = new Uint8Array((len || 24) / 2);\n        this.crypto.getRandomValues(arr);\n        return Array.from(arr, this.dec2hex).join(\"\");\n    }\n    async addDiscount(data) {\n        const discount = await this.db.discount.create({\n            data\n        });\n        return discount;\n    }\n    async getDiscountByCode(code) {\n        const discount = await this.db.discount.findUnique({\n            where: {\n                code\n            }\n        });\n        return discount;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvZGFvcy9kaXNjb3VudC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDOEM7QUFFdkMsTUFBTUM7SUFHWEMsUUFBUTtRQUNOLE9BQU8sSUFBSSxDQUFDQyxFQUFFO0lBQ2hCO0lBQ0FDLFlBQVlELEVBQWlCLENBQUU7UUFDN0IsSUFBSSxDQUFDQSxFQUFFLEdBQUdBLE1BQU0sSUFBSUgsd0RBQVlBO1FBQ2hDLElBQUksQ0FBQ0ssTUFBTSxHQUFHQyxtQkFBT0EsQ0FBQyxzQkFBUTtJQUNoQztJQUNBQyxRQUFRQyxHQUFXLEVBQUU7UUFDbkIsT0FBT0EsSUFBSUMsUUFBUSxDQUFDLElBQUlDLFFBQVEsQ0FBQyxHQUFHO0lBQ3RDO0lBQ0EsTUFBTUMscUJBQXFCQyxHQUFZLEVBQUU7UUFDdkMsSUFBSUMsTUFBTSxJQUFJQyxXQUFXLENBQUNGLE9BQU8sRUFBQyxJQUFLO1FBQ3ZDLElBQUksQ0FBQ1AsTUFBTSxDQUFDVSxlQUFlLENBQUNGO1FBQzVCLE9BQU9HLE1BQU1DLElBQUksQ0FBQ0osS0FBSyxJQUFJLENBQUNOLE9BQU8sRUFBRVcsSUFBSSxDQUFDO0lBQzVDO0lBQ0EsTUFBTUMsWUFBWUMsSUFBYyxFQUFFO1FBQ2hDLE1BQU1DLFdBQVcsTUFBTSxJQUFJLENBQUNsQixFQUFFLENBQUNrQixRQUFRLENBQUNDLE1BQU0sQ0FBQztZQUM3Q0Y7UUFDRjtRQUNBLE9BQU9DO0lBQ1Q7SUFDQSxNQUFNRSxrQkFBa0JDLElBQVksRUFBRTtRQUNwQyxNQUFNSCxXQUFXLE1BQU0sSUFBSSxDQUFDbEIsRUFBRSxDQUFDa0IsUUFBUSxDQUFDSSxVQUFVLENBQUM7WUFDakRDLE9BQU87Z0JBQ0xGO1lBQ0Y7UUFDRjtRQUNBLE9BQU9IO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21vdmllX2FwcC8uL3NyYy9kYW9zL2Rpc2NvdW50LnRzPzY2MGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlzY291bnQgfSBmcm9tIFwiQC90eXBlcy9vcmRlclwiO1xuaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5cbmV4cG9ydCBjbGFzcyBEaXNjb3VudERBTyB7XG4gIGNyeXB0bzogQ3J5cHRvO1xuICBkYjogUHJpc21hQ2xpZW50O1xuICBnZXREQigpIHtcbiAgICByZXR1cm4gdGhpcy5kYjtcbiAgfVxuICBjb25zdHJ1Y3RvcihkYj86IFByaXNtYUNsaWVudCkge1xuICAgIHRoaXMuZGIgPSBkYiB8fCBuZXcgUHJpc21hQ2xpZW50KCk7XG4gICAgdGhpcy5jcnlwdG8gPSByZXF1aXJlKFwiY3J5cHRvXCIpO1xuICB9XG4gIGRlYzJoZXgoZGVjOiBudW1iZXIpIHtcbiAgICByZXR1cm4gZGVjLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIik7XG4gIH1cbiAgYXN5bmMgZ2VuZXJhdGVEaXNjb3VudENvZGUobGVuPzogbnVtYmVyKSB7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KChsZW4gfHwgMjQpIC8gMik7XG4gICAgdGhpcy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycik7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oYXJyLCB0aGlzLmRlYzJoZXgpLmpvaW4oXCJcIik7XG4gIH1cbiAgYXN5bmMgYWRkRGlzY291bnQoZGF0YTogRGlzY291bnQpIHtcbiAgICBjb25zdCBkaXNjb3VudCA9IGF3YWl0IHRoaXMuZGIuZGlzY291bnQuY3JlYXRlKHtcbiAgICAgIGRhdGEsXG4gICAgfSk7XG4gICAgcmV0dXJuIGRpc2NvdW50O1xuICB9XG4gIGFzeW5jIGdldERpc2NvdW50QnlDb2RlKGNvZGU6IHN0cmluZykge1xuICAgIGNvbnN0IGRpc2NvdW50ID0gYXdhaXQgdGhpcy5kYi5kaXNjb3VudC5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGNvZGUsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBkaXNjb3VudDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsIkRpc2NvdW50REFPIiwiZ2V0REIiLCJkYiIsImNvbnN0cnVjdG9yIiwiY3J5cHRvIiwicmVxdWlyZSIsImRlYzJoZXgiLCJkZWMiLCJ0b1N0cmluZyIsInBhZFN0YXJ0IiwiZ2VuZXJhdGVEaXNjb3VudENvZGUiLCJsZW4iLCJhcnIiLCJVaW50OEFycmF5IiwiZ2V0UmFuZG9tVmFsdWVzIiwiQXJyYXkiLCJmcm9tIiwiam9pbiIsImFkZERpc2NvdW50IiwiZGF0YSIsImRpc2NvdW50IiwiY3JlYXRlIiwiZ2V0RGlzY291bnRCeUNvZGUiLCJjb2RlIiwiZmluZFVuaXF1ZSIsIndoZXJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/daos/discount.ts\n");

/***/ }),

/***/ "(rsc)/./src/daos/order.ts":
/*!***************************!*\
  !*** ./src/daos/order.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OrderDAO: () => (/* binding */ OrderDAO)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nclass OrderDAO {\n    getDB() {\n        return this.db;\n    }\n    constructor(db){\n        this.db = db || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n    }\n    async addCart(data) {\n        const item = {\n            quantity: data.quantity,\n            item: data.itemId,\n            clientId: data.clientId\n        };\n        const cart = await this.db.cart.create({\n            data: {\n                ...item\n            }\n        });\n        return cart;\n    }\n    async getCart(clientId) {\n        const cart = await this.db.cart.findMany({\n            where: {\n                clientId\n            }\n        });\n        return cart;\n    }\n    async getCartById(id) {\n        const cart = await this.db.cart.findUnique({\n            where: {\n                id\n            }\n        });\n        return cart;\n    }\n    async updateCart(data) {\n        const prevDetails = await this.getCartById(data.clientId);\n        if (data.quantity && prevDetails !== null) {\n            prevDetails.quantity = data.quantity;\n        }\n        if (data.item && prevDetails !== null) {\n            prevDetails.item = data.item;\n        }\n        const cart = await this.db.cart.update({\n            where: {\n                id: data.id\n            },\n            data: {\n                ...prevDetails\n            }\n        });\n        return cart;\n    }\n    async deletFromCartById(id) {\n        const cart = await this.db.cart.delete({\n            where: {\n                id\n            }\n        });\n        return cart;\n    }\n    async emptyCart(clientId) {\n        const cart = await this.db.cart.deleteMany({\n            where: {\n                clientId\n            }\n        });\n        return cart;\n    }\n    async getItemDetails(id) {\n        return await this.db.item.findUnique({\n            where: {\n                id\n            }\n        });\n    }\n    async addItem(data) {\n        const item = await this.db.item.create({\n            data\n        });\n        return item;\n    }\n    async getAllItems(s) {\n        if (s) {\n            return await this.db.item.findMany({\n                where: {\n                    name: {\n                        contains: s\n                    }\n                }\n            });\n        }\n        return await this.db.item.findMany();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNGO1FBQ0EsT0FBTyxNQUFNLElBQUksQ0FBQzFCLEVBQUUsQ0FBQ0ksSUFBSSxDQUFDTyxRQUFRO0lBQ3BDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb3ZpZV9hcHAvLi9zcmMvZGFvcy9vcmRlci50cz85MzFiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENhcnQsIEl0ZW0gfSBmcm9tIFwiQC90eXBlcy9vcmRlclwiO1xuaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5pbXBvcnQgeyBDbGllbnREQU8gfSBmcm9tIFwiLi9jbGllbnRcIjtcblxuZXhwb3J0IGNsYXNzIE9yZGVyREFPIHtcbiAgZGI6IFByaXNtYUNsaWVudDtcbiAgZ2V0REIoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGI7XG4gIH1cbiAgY29uc3RydWN0b3IoZGI/OiBQcmlzbWFDbGllbnQpIHtcbiAgICB0aGlzLmRiID0gZGIgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xuICB9XG4gIGFzeW5jIGFkZENhcnQoZGF0YTogQ2FydCkge1xuICAgIGNvbnN0IGl0ZW0gPSB7XG4gICAgICBxdWFudGl0eTogZGF0YS5xdWFudGl0eSxcbiAgICAgIGl0ZW06IGRhdGEuaXRlbUlkLFxuICAgICAgY2xpZW50SWQ6IGRhdGEuY2xpZW50SWQsXG4gICAgfTtcbiAgICBjb25zdCBjYXJ0ID0gYXdhaXQgdGhpcy5kYi5jYXJ0LmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIC4uLml0ZW0sXG4gICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBjYXJ0O1xuICB9XG4gIGFzeW5jIGdldENhcnQoY2xpZW50SWQ6IG51bWJlcikge1xuICAgIGNvbnN0IGNhcnQgPSBhd2FpdCB0aGlzLmRiLmNhcnQuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgY2xpZW50SWQsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBjYXJ0O1xuICB9XG4gIGFzeW5jIGdldENhcnRCeUlkKGlkOiBudW1iZXIpIHtcbiAgICBjb25zdCBjYXJ0ID0gYXdhaXQgdGhpcy5kYi5jYXJ0LmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBjYXJ0O1xuICB9XG4gIGFzeW5jIHVwZGF0ZUNhcnQoZGF0YTogQ2FydCkge1xuICAgIGNvbnN0IHByZXZEZXRhaWxzID0gYXdhaXQgdGhpcy5nZXRDYXJ0QnlJZChkYXRhLmNsaWVudElkKTtcbiAgICBpZiAoZGF0YS5xdWFudGl0eSAmJiBwcmV2RGV0YWlscyAhPT0gbnVsbCkge1xuICAgICAgcHJldkRldGFpbHMucXVhbnRpdHkgPSBkYXRhLnF1YW50aXR5O1xuICAgIH1cbiAgICBpZiAoZGF0YS5pdGVtICYmIHByZXZEZXRhaWxzICE9PSBudWxsKSB7XG4gICAgICBwcmV2RGV0YWlscy5pdGVtID0gZGF0YS5pdGVtO1xuICAgIH1cbiAgICBjb25zdCBjYXJ0ID0gYXdhaXQgdGhpcy5kYi5jYXJ0LnVwZGF0ZSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZDogZGF0YS5pZCxcbiAgICAgIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIC4uLnByZXZEZXRhaWxzLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gY2FydDtcbiAgfVxuICBhc3luYyBkZWxldEZyb21DYXJ0QnlJZChpZDogbnVtYmVyKSB7XG4gICAgY29uc3QgY2FydCA9IGF3YWl0IHRoaXMuZGIuY2FydC5kZWxldGUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBjYXJ0O1xuICB9XG4gIGFzeW5jIGVtcHR5Q2FydChjbGllbnRJZDogbnVtYmVyKSB7XG4gICAgY29uc3QgY2FydCA9IGF3YWl0IHRoaXMuZGIuY2FydC5kZWxldGVNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGNsaWVudElkLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gY2FydDtcbiAgfVxuXG4gIGFzeW5jIGdldEl0ZW1EZXRhaWxzKGlkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5kYi5pdGVtLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG4gIGFzeW5jIGFkZEl0ZW0oZGF0YTogSXRlbSkge1xuICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCB0aGlzLmRiLml0ZW0uY3JlYXRlKHtcbiAgICAgIGRhdGEsXG4gICAgfSk7XG4gICAgcmV0dXJuIGl0ZW07XG4gIH1cbiAgYXN5bmMgZ2V0QWxsSXRlbXMocz86IHN0cmluZykge1xuICAgIGlmIChzKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5kYi5pdGVtLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICBjb250YWluczogcyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmRiLml0ZW0uZmluZE1hbnkoKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsIk9yZGVyREFPIiwiZ2V0REIiLCJkYiIsImNvbnN0cnVjdG9yIiwiYWRkQ2FydCIsImRhdGEiLCJpdGVtIiwicXVhbnRpdHkiLCJpdGVtSWQiLCJjbGllbnRJZCIsImNhcnQiLCJjcmVhdGUiLCJnZXRDYXJ0IiwiZmluZE1hbnkiLCJ3aGVyZSIsImdldENhcnRCeUlkIiwiaWQiLCJmaW5kVW5pcXVlIiwidXBkYXRlQ2FydCIsInByZXZEZXRhaWxzIiwidXBkYXRlIiwiZGVsZXRGcm9tQ2FydEJ5SWQiLCJkZWxldGUiLCJlbXB0eUNhcnQiLCJkZWxldGVNYW55IiwiZ2V0SXRlbURldGFpbHMiLCJhZGRJdGVtIiwiZ2V0QWxsSXRlbXMiLCJzIiwibmFtZSIsImNvbnRhaW5zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/daos/order.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Fcheckout%2Froute&page=%2Fapi%2Forders%2Fcheckout%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Fcheckout%2Froute.ts&appDir=%2FUsers%2Fshaurya%2FDocuments%2Fstackapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaurya%2FDocuments%2Fstackapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();